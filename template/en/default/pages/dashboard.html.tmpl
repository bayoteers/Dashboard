[%#
  # The contents of this file are subject to the Mozilla Public
  # License Version 1.1 (the "License"); you may not use this file
  # except in compliance with the License. You may obtain a copy of
  # the License at http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS
  # IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
  # implied. See the License for the specific language governing
  # rights and limitations under the License.
  #
  # The Original Code is the Bugzilla Example Plugin.
  #
  # The Initial Developer of the Original Code is Canonical Ltd.
  # Portions created by Canonical Ltd. are Copyright (C) 2009
  # Canonical Ltd. All Rights Reserved.
  #
  # Contributor(s): 
  #   Stephen Jayna <ext-stephen.jayna@nokia.com>
  #   Allan Savolainen <ext-jari.a.savolainen@nokia.com>
  #%]

[% PROCESS global/header.html.tmpl
    title = "Bugzilla Dashboard" 
    style_urls = ['extensions/Dashboard/web/css/smoothness/jquery-ui-1.8.5.custom.css','extensions/Dashboard/web/css/dashboard.css','extensions/Dashboard/web/css/colorbox.css']
%]

<script type="text/javascript" src="extensions/Dashboard/web/js/jquery-ui-1.8.5.custom.min.js"></script>
<script type="text/javascript" src="extensions/Dashboard/web/js/jquery.colorbox-min.js"></script>
<script type="text/javascript" src="extensions/Dashboard/web/js/jquery.jfeed.pack.js"></script>

<div id="ajax_message"></div>

<div id="dashboard">
  <div id="columns">
    <ul id="column0" class="column">
      <li class="widget color-gray" id="main">
        <div class="widget-head">
          <h3>Dashboard</h3>
        </div>
        <div class="widget-content">
          <ul id="widget-buttons">
            <li id="button-add-column"><a onclick="return AddColumn();">Add column</a></li>
            <li id="button-del-column"><a onclick="return DelColumn();">Delete column</a></li>
            <li id="button-save-widgets"><a onclick="return SaveWidgets();">Save widgets</a></li>
          </ul>
          <div class="widget-divider"></div>
          <ul id="widget-buttons">
            <li id="button-new-widget"><a onclick="return AddWidget('url');">New URL</a></li>
            <li id="button-new-widget"><a onclick="return AddWidget('mybugs');">New My Bugs</a></li>
            <li id="button-new-rss"><a onclick="return AddWidget('rss');">New RSS</a></li>
            <li id="button-new-xeyes"><a onclick="return AddWidget('xeyes');">New Xeyes</a></li>
          </ul>
          <div class="widget-divider"></div>
          <p>Welcome to Dashboard!</p>
        </div>
      </li>
      
      [% column0 = columns.shift %]
      [% FOREACH widget IN column0.nsort %]
      	[% IF widget.id > 0 %]
      	  <li class="widget color-[% widget.color %]" id="widget[% widget.id %]">
      	    <div class="widget-head">
      	      <h3>[% widget.title %]</h3>
      	    </div>
      	    <div class="widget-content">
      	      <div align='center'><img class='loader' src='extensions/Dashboard/web/css/img/ajax-loader.gif'></div>
      	    </div>
       	  </li>
      	[% END %]
      [% END %]
    </ul>
    
    [% FOREACH i IN [1 .. preferences.columns] %]
      [% column = columns.shift %]
      <ul id="column[% i %]" class="column">
        [% FOREACH widget IN column.nsort %]
          [% IF widget.id > 0 %]
            <li class="widget color-[% widget.color %]" id="widget[% widget.id %]">
              <div class="widget-head">
                <h3>[% widget.title %]</h3>
              </div>
              <div class="widget-content">
                <div align='center'><img class='loader' src='extensions/Dashboard/web/css/img/ajax-loader.gif'></div>
              </div>
            </li>
          [% END %]
        [% END %]
      </ul>
    [% END %]
  </div>
</div>

[% IF widget_error %]
  <script>
    alert("[% widget_error | replace('\"','\\"') %]");
  </script>
[% END %]

<script type="text/javascript" src="extensions/Dashboard/web/js/dashboard.js"></script>

[% PROCESS pages/footer.html.tmpl %]
