[%#
  # The contents of this file are subject to the Mozilla Public
  # License Version 1.1 (the "License"); you may not use this file
  # except in compliance with the License. You may obtain a copy of
  # the License at http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS
  # IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
  # implied. See the License for the specific language governing
  # rights and limitations under the License.
  #
  # The Original Code is the Bugzilla Example Plugin.
  #
  # The Initial Developer of the Original Code is Canonical Ltd.
  # Portions created by Canonical Ltd. are Copyright (C) 2009
  # Canonical Ltd. All Rights Reserved.
  #
  # Contributor(s): 
  #   David Wilson <ext-david.3.wilson@nokia.com>
  #   Stephen Jayna <ext-stephen.jayna@nokia.com>
  #   Allan Savolainen <ext-jari.a.savolainen@nokia.com>
  #%]

[% USE Bugzilla %]

[% header = BLOCK %]
    Dashboard
    <span id="buttons">
        &nbsp;
        <a id="button-overlay" title="Open Overlay"></a>
        <a id="button-save-widgets" title="Save Overlay"></a>
        <a id="button-clear-workspace" title="Clear workspace"></a>
        &nbsp;&nbsp;
        <a id="button-new-url" title="New URL"></a>
        <a id="button-new-bugs" title="New Bugs"></a>
        <a id="button-new-mybugs" title="New My Bugs"></a>
        <a id="button-new-rss" title="New RSS"></a>
        <a id="button-new-text" title="New Text"></a>
        &nbsp;&nbsp;
        <a id="button-add-column" title="Add column"></a>
        <a id="button-del-column" title="Delete column"></a>
        <a id="button-reset-columns" title="Reset column widths"></a>
    </span>

    &nbsp;
    <span id="dashboard_notify"></p>
[% END %]

[% PROCESS global/header.html.tmpl
    title = "Bugzilla Dashboard"
%]

<link rel="stylesheet" href="extensions/Dashboard/web/css/smoothness/jquery-ui-1.8.5.custom.css">
<link rel="stylesheet" href="extensions/Dashboard/web/css/dashboard.css">
<link rel="stylesheet" href="extensions/Dashboard/web/css/colorbox.css">
<link rel="stylesheet" href="extensions/Dashboard/web/css/tablesorter.css">

<div id="dashboard">
    <div id="columns">
        <ul id="column-1" class="column" data-column_id="-1">
        </ul>

        <br clear="both">
    </div>
</div>

<br clear="both">

<div style="display: none;"> <!-- hide templates -->
    <div align="center" id="loader_template">
        <img class="loader"
            src="extensions/Dashboard/web/css/img/ajax-loader.gif">
    </div>

    <div id="browser_warning_template">
        <p style="color: red">
        Your web browser is not fully tested with the Dashboard, please use
        Firefox if you experience problems.
        </p>
    </div>

    <div id="browser_block_template">
        <h2 style="text-align: center">Your web browser is not compatible with
        Dashboard; please use Firefox instead.</h2>
    </div>

    <div id="widget_maximized_hint" class="maximized-hint"> <!-- id="maximized" -->
        <p>
        Press ESC or click here to return to the Dashboard.
        </p>
    </div>

    <ul class="column" id="column_template">
        <li class="column_helper">
            <div class="arrow_left"></div>
            <div class="arrow_right"></div>
            <br clear="both">
        </li>
    </ul>

    <li class="widget" id="widget_template">
        <div class="widget-head">
            <a class="maximize" title="Maximize">MAXIMIZE</a>
            <a class="collapse" title="Restore">COLLAPSE</a>
            <div class="widget-title"></div>
            <a class="remove" title="Close">REMOVE</a>
            <a class="refresh" title="Refresh">REFRESH</a>
            <a class="edit" title="Edit">EDIT</a>
            <a class="save" title="Save">SAVE</a>
        </div>
        <ul class="edit-box" style="display: none">
            <li class="item">
                <label>Change the title?</label>
                <input class="field-title">
            </li>
            <li class="item">
                <label>Available colors:</label>
                <ul class="colors"></ul>
            </li>
            <li class="item">
                <label>Reload:</label>
                <select class="field-refresh">
                    <option value="0">no refresh</option>
                    <option value="15">every 15 seconds</option>
                    <option value="60">every minute</option>
                    <option value="300">every 5 minutes</option>
                    <option value="900">every 15 minutes</option>
                    <option value="1800">every 30 minutes</option>
                </select>
            </li>
        </ul>
        <div class="widget-content">
            <div class="widget_inner">
            </div>
        </div>
    </li>

    <pre id="dashboard_welcome_text">To begin, please load an existing overlay using the Open icon in the toolbar above, or alternatively you may clear the workspace and begin building a new overlay from scratch.

The current workspace available in this session will not be saved until you explicitly write the changes to a new or existing overlay, using the Save icon above.
</pre>

    <div id="text_widget_template">
    </div>

    <div id="text_widget_settings_template">
        <li class="item">
            <label>Text:</label>
            <textarea style="width: 100%; height: 10em;"
                class="field-text"></textarea>
    </div>

    <div id="url_widget_template">
        <iframe target="new" class="widget_iframe" frameborder="0"
            scrolling="auto"></iframe>
    </div>

    <div id="url_widget_settings_template">
        <li class="item">
            <label>URL:</label>
            <input class="field-URL">
        </li>

        <li class="item">
            <label>Selector:</label>
            <input class="field-selector"><br>
            <small>&nbsp; Supported syntax:
                <a target="_new" href="http://www.w3.org/TR/CSS2/selector.html#pattern-matching">CSS</a>,
                <a target="_new" href="http://api.jquery.com/category/selectors/">jQuery</a></small>
        </li>

        <li class="item">
            <label>Load:</label>
            <input type="button" class="field-load-url" value="Load URL">
        </li>
    </div>

    <div id="rss_widget_settings_template">
        <li class="item">
            <label>URL:</label>
            <input class="field-URL">
        </li>

        <li class="item">
            <label>Username:</label>
            <input class="field-username">
        </li>

        <li class="item">
            <label>Password:</label>
            <input type="password" class="field-password">
        </li>
    </div>

    <div id="mybugs_widget_settings_template">
    </div>

    <div id="rss_widget_template" class="rss">
        <h2><a target="_new"></a></h2>
    </div>

    <div id="rss_item_template">
        <div class="rss_title">
            <h3><a target="_new"></a></h3>
        </div>
        <div class="updated">
            <p>
            Updated: <span class="updated-text"></span>
            </p>
        </div>
        <div class="description-text">
        </div>
    </div>

    <div id="rss_widget_error">
        <p class="error">
        Feed returned error: <span class="error-text"></span>
        </p>
    </div>

    <div id="bugs_widget_settings_template">
        <li class="item">Search parameters</li>
        <form class="search_params">
        <li class="item">
            <label>Alias:</label><input name="alias" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Assigned to:</label><input name="assigned_to" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Component:</label><input name="component" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Creation time:</label><input name="creation_time" type="text"/>
        </li>
        <li class="item">
            <label>ID:</label><input name="id" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Last change time:</label><input name="last_change_time" type="text"/>
        </li>
        <li class="item">
            <label>Limit:</label><input name="limit" type="text"/>
        </li>
        <li class="item">
            <label>Offset:</label><input name="offset" type="text"/>
        </li>
        <li class="item">
            <label>Operating system:</label><input name="op_sys" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Platform:</label><input name="platform" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Priority:</label><input name="priority" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Product:</label><input name="product" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Reporter:</label><input name="reporter" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Resolution:</label><input name="resolution" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Severity:</label><input name="severity" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Status:</label><input name="status" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Summary:</label><input name="summary" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Target milestone:</label><input name="target_milestone" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>QA contact:</label><input name="qa_contact" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>URL:</label><input name="url" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Version:</label><input name="version" type="text"/>
	    <a class="add_entry"></a>
        </li>
        <li class="item">
            <label>Votes:</label><input name="votes" type="text"/>
        </li>
        <li class="item">
            <label>Whiteboard:</label><input name="whiteboard" type="text"/>
	    <a class="add_entry"></a>
        </li>
        </form>
        <li class="item">Result display options</li>
        <form class="table_options">
        <li class="item">
            <label>Show fields:</label><input name="fields" type="text"/>
	    <a class="add_entry"></a>
        </li>
        </form>
    </div>

    <table> <!-- required to satisfy HTML parser. -->
    <tr id="overlay_template">
        <td align="right" valign="top">
            <a class="load_link"><span class="name"></span></a>
            <span class="can-publish">[<a class="publish_link">ok</a>]</span>
        </td>
        <td valign="top">
            <span class="description is-workspace"></span>
            <br>
            <small>
                <span class="modified"></span>,
                <span class="login"></span>
            </small>
            <span class="can-publish">
            </span>
        </td>
        <td valign="top" align="right" style="width: 4ex;">
            <span class="can-delete"><a class="delete_link">Del</a></span>
        </td>
    </tr>
    </table>

    <div id="overlay_page">
        <div>
        <strong>Load Overlay</strong>
        </div>

        <div class="overlay_box" id="overlay_load_box">
            <table width=100%><tbody></tbody></table>
        </div>

        <div>
        <br>
        <strong>Save Overlay</strong>
        </div>

        <div class="overlay_box" id="overlay_save_box">
            <table>
            <tr>
            <th align="right" valign="top">
                Overlay name:
            <td valign="top">
                <input class="overlay_field" id="overlay_name" size="32">

            <tr>
            <th align="right" valign="top">
                Description:
            <td valign="top">
                <input class="overlay_field" id="overlay_description" size="32">
            <tr>
            <th align="right" valign="top">
                <input id="overlay_shared" type="checkbox"> Shared
                <div class="requires-admin">
                    <small><br>requires<br>admin<br>approval</small>
                </div>
            <td align="right" valign="top">
                <button id="overlay_save_button">Save</button>
            </table>
        </div>
    </div>

    <div id="in_progress_template" style="background: #7f0000; color: white; padding: 0.5ex; position: fixed; top: 0; right: 0; z-index: 9999999; text-decoration:blink">
        Working..
    </div>
</div> <!-- /hide templates -->


<script>
var DASHBOARD_CONFIG = [% dashboard_config || 'null' %];
</script>
<script src="extensions/Dashboard/web/js/Base.js"></script>
<script src="extensions/Dashboard/web/js/jquery-1.7.min.js"></script>
<script src="extensions/Dashboard/web/js/jquery-ui-1.8.5.custom.min.js"></script>
<script src="extensions/Dashboard/web/js/jquery.colorbox-min.js"></script>
<script src="extensions/Dashboard/web/js/jquery.tablesorter.min.js"></script>
<script src="extensions/Dashboard/web/js/jquery.jsonrpc.js"></script>
<script src="extensions/Dashboard/web/js/dashboard.js"></script>
<script src="extensions/Dashboard/web/js/widget_bugs.js"></script>

[% PROCESS global/footer.html.tmpl %]
